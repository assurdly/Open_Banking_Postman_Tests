{"status":"success","message":"Successfully fetched API","data":{"upstream":"\n              local function transform_upstream_request()\n              -- Read the request body\n              kong.service.request.enable_buffering()  -- Enable buffering to read body\n              local data, err = kong.request.get_body()\n              if err then\n                  kong.log.err(err)\n                  return\n              end\n              \n            end\n            return transform_upstream_request\n            ","downstream":"\n              local cjson = require 'cjson.safe'\n            \n              local function transform_downstream_response()\n                local data = kong.response.get_raw_body()\n                data = cjson.decode(data)\n                \n                  if kong.service.response.get_status() == nil then\n                    return\n                  end\n                  if data then\n                    data = cjson.encode({\n    [\"status\"] = tostring(data.status),\n    [\"message\"] = tostring(data.message),\n    [\"data\"] = {\n        -- Refer to lua's documentation on how to access and use array(table) data\n        {\n            [\"customer_id\"] = tostring(data.data[1].customer_id),\n            [\"account_number\"] = tostring(data.data[1].account_number),\n            [\"currency\"] = tostring(data.data[1].currency),\n            [\"card_holder_name\"] = tostring(data.data[1].card_holder_name),\n            [\"card_type\"] = tostring(data.data[1].card_type),\n            [\"card_number\"] = tostring(data.data[1].card_number),\n            [\"card_cvv\"] = tonumber(data.data[1].card_cvv),\n            [\"card_default_pin\"] = tostring(data.data[1].card_default_pin),\n            [\"card_token\"] = tostring(data.data[1].card_token),\n            [\"card_expiry\"] = {\n                [\"month\"] = tonumber(data.data[1].card_expiry.month),\n                [\"year\"] = tonumber(data.data[1].card_expiry.year),\n            },\n            [\"card_address\"] = {\n                [\"street\"] = tostring(data.data[1].card_address.street),\n                [\"city\"] = tostring(data.data[1].card_address.city),\n                [\"state\"] = tostring(data.data[1].card_address.state),\n                [\"country\"] = tostring(data.data[1].card_address.country),\n            },\n        },\n    },\n})\n                    kong.response.set_raw_body(data)\n                  end\n                  \n              end\n\n              return transform_downstream_response\n            "}}